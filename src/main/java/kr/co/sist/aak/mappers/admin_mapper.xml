<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.sist.aak.admin">
	
	<select id="selectAllAdminNotice" resultType ="noticeManagementDomain">
	select * from NOTICE order by NOTI_NO desc 
	</select>
	<!-- 공지사항 관리 상태에 따른 검색 쿼리 -->
	<select id="dynamicNotificaionStatus" resultType="noticeManagementDomain" parameterType="int" >
	select noti_no, write_date,status,title
	from NOTICE
	where 
	<choose>
	<when test ="status eq 0">
	status = 'RESV'
	</when>
	<when test ="status eq 1">
	status = 'POST'
	</when>
	<otherwise>
	status = 'DELT'
	</otherwise>
	</choose>
	</select>
	
	<!--  공지사항 제목으로 검색 -->
	
	<select id="searchNotificationTitle" resultType="noticeManagementDomain" parameterType="String">
	select * 
	from NOTICE
	where title like '%'||#{title}||'%'
	order by NOTI_NO desc 
	</select>
	
	
	<select id="selectAdminNoticeMaxval" resultType ="String">
	select max(NOTI_NO)
	from   NOTICE
	</select>
	<select id="selectOneAdminNotice" parameterType="String" resultType ="noticeManagementDomain">
	select * 
	from NOTICE
	where noti_no =#{noti_no}
	</select>
	<insert id="insertAdminNotice" parameterType="noticeManagementVO">
	INSERT INTO NOTICE (NOTI_NO, TITLE, ID, CONTENT, STATUS) VALUES
	(#{noti_no},#{title} ,#{id} ,#{content} ,#{status} )

	</insert>
	<update id="updateAdminNotice" parameterType="noticeManagementVO">
	update NOTICE
	set    STATUS = #{status}
	where  NOTI_NO = #{noti_no}
	</update>
	
	<update id="deleteAdminNotice" parameterType="String">
	update NOTICE
	set    STATUS = DELT
	where  NOTI_NO = #{noti_no}
	</update>
	
</mapper>